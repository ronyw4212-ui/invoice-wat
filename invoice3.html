<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Invoice & Laporan AC</title>

<style>
@page{size:A4;margin:20mm}
body{font-family:Arial,Helvetica,sans-serif;background:#f4f6f8}

/* DOCUMENT */
.document{width:210mm;margin:auto;background:#fff;padding:20px}

/* KOP */
.kop{
display:flex;align-items:center;gap:15px;
border-bottom:2px solid #0d6efd;
padding-bottom:10px;margin-bottom:15px}
.kop img{height:65px}
.kop h2{margin:0;font-size:18px;color:#0d6efd}
.kop p{margin:2px 0;font-size:12px}

/* GENERAL */
h3{text-align:center;margin:15px 0}
.info{display:flex;justify-content:space-between;font-size:12px}
table{width:100%;border-collapse:collapse;font-size:12px;margin-top:10px}
table,th,td{border:1px solid #ccc}
th{background:#0d6efd;color:#fff;padding:6px}
td{padding:5px;text-align:center}
input{width:100%;border:none;font-size:12px;text-align:center}
input:focus{outline:none}

/* TOTAL */
.totals{width:45%;margin-left:auto;margin-top:15px}
.totals td{text-align:right}

/* FOTO */
.photo-grid{
display:grid;grid-template-columns:repeat(2,1fr);
gap:10px;margin-top:10px}
.photo-grid img{
width:100%;height:auto;object-fit:contain;
border:1px solid #ccc;padding:4px}

/* PAYMENT */
.payment{
display:flex;justify-content:space-between;
font-size:12px;margin-top:20px}
.qris img{max-width:120px;border:1px solid #ccc;padding:5px}

/* GARANSI */
.warranty{
margin-top:15px;padding:10px;
border:1px dashed #0d6efd;
font-size:12px;background:#f8fbff}

/* SIGN */
.signature{
width:40%;margin-left:auto;margin-top:40px;
text-align:center;font-size:12px}
.signature .line{margin-top:55px;border-top:1px solid #000}

/* ACTION */
.actions{text-align:center;margin-top:20px}
button{
padding:7px 12px;border:none;
background:#0d6efd;color:#fff;
cursor:pointer;margin:4px}

@media print{
.actions{display:none}
body{background:none}
.photo-grid img{max-height:160px;page-break-inside:avoid}
}
</style>
</head>

<body>

<div class="document">

<!-- KOP -->
<div class="kop">
<img src="./logo.png">
<div>
<h2>PT WIJAYA ANUGRAH TEKNIK</h2>
<p><b>Spesialis Sistem Pendingin</b></p>
<p>Perbaikan ‚Ä¢ Perawatan ‚Ä¢ Pengadaan Unit</p>
<p style="font-size:11px">
JL. H Rean Benda Baru Pamulang, Tangerang Selatan<br>
Telp / WA : 0811-8011-436
</p>
</div>
</div>

<!-- INFO -->
<div class="info">
<div>
Nama Customer:<br><input id="custName"><br>
Alamat:<br><input id="custAddr"><br>
No. Telp:<br><input id="custPhone">
</div>
<div>
No Invoice:<br><input id="invoiceNo"><br>
Tanggal Service:<br>
<input type="date" id="tanggal">
</div>
</div>

<!-- LAPORAN -->
<h3>LAPORAN PEKERJAAN UNIT AC</h3>
<table>
<thead>
<tr>
<th>Lokasi</th><th>Merk</th>
<th>Freon Sblm</th><th>Freon Ssdh</th>
<th>Amp Sblm</th><th>Amp Ssdh</th>
</tr>
</thead>
<tbody>
<tr>
<td><input></td><td><input></td>
<td><input></td><td><input></td>
<td><input></td><td><input></td>
</tr>
</tbody>
</table>

<!-- FOTO -->
<h3>LAMPIRAN FOTO PEKERJAAN</h3>
<input type="file" multiple accept="image/*" onchange="previewFoto(this)">
<div class="photo-grid" id="photoPreview"></div>

<!-- INVOICE -->
<h3>RINCIAN INVOICE</h3>
<table id="invoiceTable">
<thead>
<tr>
<th>Deskripsi</th><th>Qty</th><th>Harga</th><th>Subtotal</th>
</tr>
</thead>
<tbody>
<tr>
<td><input></td>
<td><input type="number" value="1" oninput="hitung()"></td>
<td><input type="number" value="0" oninput="hitung()"></td>
<td class="rowTotal">0</td>
</tr>
</tbody>
</table>

<table class="totals">
<tr><td>Subtotal</td><td id="subTotal">0</td></tr>
<tr>
<td>Diskon</td>
<td><input type="number" id="diskon" value="0" oninput="hitung()"></td>
</tr>
<tr>
<td>
<label>
<input type="checkbox" id="ppnCheck" onchange="hitung()"> Pajak 11%
</label>
</td>
<td id="ppnValue">0</td>
</tr>
<tr>
<td><b>Grand Total</b></td>
<td><b id="grandTotal">0</b></td>
</tr>
</table>

<!-- PAYMENT -->
<div class="payment">
<div>
<b>Pembayaran:</b><br><br>
Transfer Bank BCA<br>
No. Rek : <b>2190116851</b><br>
A.N : <b>Roni Wijaya</b>
</div>
<div class="qris">
<b>QRIS</b><br><br>
<img src="./qris.jpg">
</div>
</div>

<!-- GARANSI -->
<div class="warranty">
<b>Keterangan Garansi:</b><br>
‚Ä¢ Garansi material <b>30 hari</b><br>
‚Ä¢ Garansi jasa <b>14 hari</b>
</div>

<!-- SIGN -->
<div class="signature">
Hormat Kami,<br>
<b>PT WIJAYA ANUGRAH TEKNIK</b>
<div class="line"></div>
<b>Bani Wijaya</b><br>
Manager Finance
</div>

<div class="actions">
<button onclick="cekRekapBulanan()">üìä Cek Rekapan Bulanan</button>
<button onclick="window.print()">üñ® Print / PDF</button>
</div>

</div>

<script>
function previewFoto(input){
let wrap=document.getElementById("photoPreview");
wrap.innerHTML="";
[...input.files].forEach(f=>{
let img=document.createElement("img");
img.src=URL.createObjectURL(f);
wrap.appendChild(img);
});
}

function hitung(){
let sub=0;
document.querySelectorAll("#invoiceTable tbody tr").forEach(r=>{
let qty=r.children[1].children[0].value;
let harga=r.children[2].children[0].value;
let total=qty*harga;
r.querySelector(".rowTotal").innerText=total.toLocaleString("id-ID");
sub+=total;
});
document.getElementById("subTotal").innerText=sub.toLocaleString("id-ID");

let diskon=parseInt(document.getElementById("diskon").value||0);
let ppn=document.getElementById("ppnCheck").checked ? sub*0.11 : 0;
document.getElementById("ppnValue").innerText=ppn.toLocaleString("id-ID");

let grand=sub-diskon+ppn;
document.getElementById("grandTotal").innerText=grand.toLocaleString("id-ID");
}

/* REKAP BULANAN */
function cekRekapBulanan(){
alert("Rekap bulanan siap ‚Äì nanti bisa dikembangkan ke dashboard üëç");
}
</script>

</body>
</html>
